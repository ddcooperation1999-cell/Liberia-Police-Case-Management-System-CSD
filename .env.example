# ============================================================================
# POLICE CASE MANAGEMENT SYSTEM - ENVIRONMENT CONFIGURATION
# ============================================================================
# SECURITY WARNING: This file contains sensitive information.
# Never commit to version control. Use secure configuration management.
# ============================================================================

# ============================================================================
# 1. CORE APPLICATION SETTINGS
# ============================================================================
NODE_ENV=development  # production, development, staging
PORT=3001
FRONTEND_URL=http://localhost:3000

# ============================================================================
# 2. SECURITY & ENCRYPTION
# ============================================================================

# JWT Configuration
# CRITICAL: Change JWT_SECRET to a strong random string (32+ characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-super-secret-key-change-this-to-random-32-chars-minimum

# JWT Token Expiration
SESSION_TIMEOUT=8h  # 8 hours

# Bcrypt Configuration
BCRYPT_ROUNDS=12  # Higher = more secure but slower (12-14 recommended)

# ============================================================================
# 3. DATABASE CONFIGURATION
# ============================================================================

# SQLite (default - file-based, no external DB needed)
DB_TYPE=sqlite
DB_PATH=./database.db

# PostgreSQL (optional - comment out SQLite above if using Postgres)
# DB_TYPE=postgres
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=police_cms
# DB_USER=postgres
# DB_PASSWORD=your-password

# Database Connection Pool
DB_POOL_MIN=2
DB_POOL_MAX=10

# ============================================================================
# 4. HTTPS & TLS CONFIGURATION
# ============================================================================

# SSL Certificate Paths (leave empty for development)
# For production, provide full paths to certificate files
SSL_CERT_PATH=  # /path/to/certificate.crt
SSL_KEY_PATH=   # /path/to/private.key

# TLS Configuration
TLS_MIN_VERSION=TLSv1.2
TLS_CIPHER_SUITE=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384

# ============================================================================
# 5. RATE LIMITING & DOS PROTECTION
# ============================================================================

# Rate Limiting Configuration
RATE_LIMIT_WINDOW=15  # Minutes
RATE_LIMIT_MAX_REQUESTS=100  # Per window

# Brute Force Protection
MAX_LOGIN_ATTEMPTS=5
LOGIN_LOCKOUT_DURATION=1800  # 30 minutes in seconds

# ============================================================================
# 6. CORS & API CONFIGURATION
# ============================================================================

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# API Rate Limiting
API_RATE_LIMIT_WINDOW=15
API_RATE_LIMIT_MAX=100

# ============================================================================
# 7. LOGGING & MONITORING
# ============================================================================

# Log Level
LOG_LEVEL=info  # error, warn, info, debug, trace

# Log Files
LOG_DIR=./logs
AUDIT_LOG_FILE=./logs/audit.log
ERROR_LOG_FILE=./logs/error.log

# Sensitive Data Masking (in logs)
MASK_SENSITIVE_DATA=true
MASK_PATTERNS=password,token,secret,key,credit

# ============================================================================
# 8. BACKUP & DISASTER RECOVERY
# ============================================================================

# Automated Backups
BACKUP_AUTOMATED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2:00 AM (cron format)
BACKUP_RETENTION_DAYS=30   # Keep 30 days of backups

# Backup Encryption
BACKUP_ENCRYPTION_ENABLED=true
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key-32-chars-minimum

# Backup Compression
BACKUP_COMPRESSION_ENABLED=true

# ============================================================================
# 9. AWS S3 INTEGRATION (Optional)
# ============================================================================

# Enable S3 Backups
BACKUP_CLOUD_STORAGE_ENABLED=false  # Set to true to enable
BACKUP_CLOUD_PROVIDER=aws

# AWS Credentials
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...

# AWS S3 Buckets
AWS_S3_BACKUP_BUCKET=police-cms-backups
AWS_S3_DOCUMENTS_BUCKET=police-cms-documents

# ============================================================================
# 10. AZURE BLOB STORAGE INTEGRATION (Optional)
# ============================================================================

# Enable Azure Backups (instead of AWS)
BACKUP_CLOUD_PROVIDER=azure  # Change if using Azure instead of AWS

# Azure Storage Configuration
AZURE_STORAGE_ACCOUNT_NAME=policecmsbackup
AZURE_STORAGE_ACCOUNT_KEY=...
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=...
AZURE_BACKUP_CONTAINER=backups
AZURE_STORAGE_BLOB_ENDPOINT=https://policecmsbackup.blob.core.windows.net/

# ============================================================================
# 11. EMAIL & NOTIFICATIONS (Optional)
# ============================================================================

# Email Configuration (for alerts & password resets)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@police-cms.local

# Email Recipients (comma-separated)
ADMIN_EMAIL=admin@police-cms.local
SECURITY_EMAIL=security@police-cms.local
ALERT_RECIPIENTS=admin@police-cms.local,security@police-cms.local

# ============================================================================
# 12. EXTERNAL INTEGRATIONS
# ============================================================================

# Third-Party APIs
EXTERNAL_API_TIMEOUT=30000  # milliseconds
EXTERNAL_API_RETRY_COUNT=3

# File Upload Settings
MAX_FILE_SIZE=52428800  # 50MB in bytes
ALLOWED_FILE_TYPES=pdf,doc,docx,xlsx,jpg,png,txt
UPLOAD_DIR=./uploads

# ============================================================================
# 13. FEATURE FLAGS
# ============================================================================

# Feature Toggles
FEATURE_MFA_ENABLED=false  # Multi-Factor Authentication
FEATURE_2FA_EMAIL=false    # Two-Factor Auth via Email
FEATURE_IP_WHITELIST=false # IP-based access control
FEATURE_AUDIT_DETAILED=true  # Detailed audit logging

# ============================================================================
# 14. SECURITY HEADERS
# ============================================================================

# Helmet.js Configuration
HELMET_CSP_ENABLED=true
HELMET_HSTS_ENABLED=true
HELMET_HSTS_MAX_AGE=31536000  # 1 year

# ============================================================================
# 15. MONITORING & ALERTS
# ============================================================================

# Monitoring Service (optional - Datadog, New Relic, etc.)
MONITORING_ENABLED=false
MONITORING_SERVICE=datadog  # datadog, newrelic, elastic
MONITORING_API_KEY=...

# Alert Thresholds
ALERT_ERROR_RATE_THRESHOLD=0.05  # 5% error rate
ALERT_RESPONSE_TIME_THRESHOLD=5000  # 5 seconds

# ============================================================================
# 16. DEVELOPMENT SETTINGS (Use with caution!)
# ============================================================================

# Debug Mode (NEVER enable in production)
DEBUG=false

# Verbose Logging
VERBOSE_LOGS=false

# Allow CORS from any origin (NEVER in production)
ALLOW_ALL_ORIGINS=false

# Disable HTTPS checking (NEVER in production)
INSECURE_SKIP_HTTPS_CHECK=false

# ============================================================================
# 17. COMPLIANCE & AUDIT
# ============================================================================

# Data Retention Policies
AUDIT_LOG_RETENTION_DAYS=1095  # 3 years
CASE_RECORD_RETENTION_YEARS=7

# Compliance Mode
ISO_27001_COMPLIANCE_MODE=true
GDPR_MODE=true
CCPA_MODE=false

# ============================================================================
# 18. SECURITY HEADERS & POLICIES
# ============================================================================

# Content Security Policy
CSP_DIRECTIVES=default-src 'self';script-src 'self';style-src 'self' 'unsafe-inline'

# X-Frame-Options
X_FRAME_OPTIONS=DENY  # DENY, SAMEORIGIN, ALLOW-FROM

# X-Content-Type-Options
X_CONTENT_TYPE_OPTIONS=nosniff

# Referrer-Policy
REFERRER_POLICY=strict-origin-when-cross-origin

# ============================================================================
# 19. DEPLOYMENT SETTINGS
# ============================================================================

# Application Version
APP_VERSION=1.0.0

# Service Dependencies
REDIS_ENABLED=false  # For session caching
REDIS_URL=redis://localhost:6379

# Load Balancer
BEHIND_PROXY=false  # Set to true if behind Nginx/HAProxy
PROXY_TRUST_DEPTH=1

# ============================================================================
# SECURITY CHECKLIST
# ============================================================================
# Before deployment, ensure:
# [ ] JWT_SECRET is changed to strong random value
# [ ] DB passwords are secure (if using external DB)
# [ ] SSL_CERT_PATH and SSL_KEY_PATH are configured
# [ ] NODE_ENV is set to 'production'
# [ ] Debug mode is disabled
# [ ] ALLOW_ALL_ORIGINS is false
# [ ] HTTPS is enabled and enforced
# [ ] Backups are configured and tested
# [ ] Email alerts are configured
# [ ] Security headers are proper
# [ ] Rate limiting is configured
# [ ] Audit logging is enabled
# [ ] Regular backups are scheduled
# [ ] Monitoring and alerts are active
#
# ============================================================================
